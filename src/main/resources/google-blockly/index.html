<!DOCTYPE html>
<html lang="sk">
	<!-- ++++++++++++++++++++ WEBPAGE LAYOUT & STYLE ++++++++++++++++++++ -->
	<head>
		<meta charset="utf-8">
		<title></title>
		<style>
			html, body, #blocklyArea {
				height: 100%;
				margin: 0;
			}
		</style>		
	</head>
	
	<body>  
		<div id="blocklyDiv" style="position: absolute"></div>
		<div id="blocklyArea"></div>  
		
		<!-- ++++++++++++++++++++ BLOCKLY LIBRARY ++++++++++++++++++++ -->
		<script src="blockly_uncompressed.js"></script>
		<script src="en.js"></script>
		
		<!-- ++++++++++++++++++++ CUSTOM BLOCKLY BLOCKS & GENERATORS ++++++++++++++++++++ -->

		<script src="generators/otto-basic.js"></script>
		
		<script src="generators/otto-procedural/otto-procedural.js"></script>
		<script src="generators/otto-procedural/lists.js"></script>
		<script src="generators/otto-procedural/logic.js"></script>
		<script src="generators/otto-procedural/loops.js"></script>
		<script src="generators/otto-procedural/math.js"></script>
		<script src="generators/otto-procedural/procedures.js"></script>
		<script src="generators/otto-procedural/text.js"></script>
		<script src="generators/otto-procedural/variables.js"></script>
		<script src="generators/otto-procedural/variables_dynamic.js"></script>
		<script src="generators/otto-procedural/otto.js"></script>
		
		<script src="blocks/otto-basic.js"></script>
		<script src="blocks/lists.js"></script>
		<script src="blocks/logic.js"></script>
		<script src="blocks/loops.js"></script>
		<script src="blocks/math.js"></script>
		<script src="blocks/procedures.js"></script>
		<script src="blocks/text.js"></script>
		<script src="blocks/variables.js"></script>
		<script src="blocks/variables_dynamic.js"></script>

		<!-- ++++++++++++++++++++ SETUP & INJECT BLOCKLY ++++++++++++++++++++ -->			
		<script>
			var options = { 
				toolbox :  '<xml id="toolbox"><category></category></xml>',
				collapse : false, 
				comments : false, 
				disable : true, 
				maxBlocks : Infinity, 
				trashcan : false, 
				horizontalLayout : false, 
				toolboxPosition : 'start', 
				css : true,  
				rtl : false, 
				scrollbars : true, 
				sounds : true, 
				oneBasedIndex : true,
				zoom:
					{controls: true,
					wheel: true,
					startScale: 1.0,
					maxScale: 3,
					minScale: 0.3,
					scaleSpeed: 1.2,
					pinch: true}
			};
		
			var blocklyArea = document.getElementById('blocklyArea');
			var blocklyDiv = document.getElementById('blocklyDiv');
			var workspace = Blockly.inject(blocklyDiv, options);
			var onresize = function(e) {
				var element = blocklyArea;
				var x = 0;
				var y = 0;
				do {
					x += element.offsetLeft;
					y += element.offsetTop;
					element = element.offsetParent;
				} while (element);
				blocklyDiv.style.left = x + 'px';
				blocklyDiv.style.top = y + 'px';
				blocklyDiv.style.width = blocklyArea.offsetWidth + 'px';
				blocklyDiv.style.height = blocklyArea.offsetHeight + 'px';
				Blockly.svgResize(workspace);
			};
			window.addEventListener('resize', onresize, false);
			onresize();
			Blockly.svgResize(workspace);
			
			function myUpdateFunction(event) {
				//var code = Blockly.JavaScript.workspaceToCode(workspace);
				window.javaCall.workspaceChanged();
			}
			//workspace.addChangeListener(myUpdateFunction);
			workspace.addChangeListener(Blockly.Events.disableOrphans);			
			
		</script>
	</body>
</html>